{
  "kah-helmrelease": {
    "prefix": "kah-hr",
    "body": [
      "---",
      "apiVersion: helm.toolkit.fluxcd.io/v2beta1",
      "kind: HelmRelease",
      "metadata:",
      "  name: &app ${1:app_name}",
      "  namespace: ${2:namespace}",
      "spec:",
      "  interval: 15m",
      "  chart:",
      "    spec:",
      "      chart: app-template",
      "      version: 0.1.1",
      "      sourceRef:",
      "        kind: HelmRepository",
      "        name: bjw-s-charts",
      "        namespace: flux-system",
      "  install:",
      "    createNamespace: true",
      "    remediation:",
      "      retries: 5",
      "  upgrade:",
      "    remediation:",
      "      retries: 5",
      "#  dependsOn:",
      "#    - name: intel-gpu-plugin",
      "#      namespace: kube-system",
      "  values:",
      "    image:",
      "      repository: ${3:repository}",
      "      tag: ${4:tag}", 
      "    env:",
      "      TZ: \"\\${TZ\\}\"",
      "    service:",
      "      main:",
      "        ports:",
      "          http:",
      "            port: ${5:port}",
      "    ingress:",
      "      main:",
      "        enabled: true",
      "        ingressClassName: \"nginx\"",
      "#          annotations:",
      "#            external-dns.home.arpa/enabled: \"true\"",
      "#            auth.home.arpa/enabled: \"true\"",
      "        hosts:",
      "          - host: &host \"{{ .Release.Name }}.\\${EXTERNAL_DOMAIN\\}\"",
      "            paths:",
      "              - path: /",
      "                pathType: Prefix",
      "        tls:",
      "          - hosts:",
      "              - *host",
      "    podSecurityContext:",
      "      runAsUser: 568",
      "      runAsGroup: 568",
      "      fsGroup: 568",
      "      fsGroupChangePolicy: \"OnRootMismatch\"",
      "    persistence:",
      "      config:",
      "        enabled: true",
      "        existingClaim: ${6:pvc_name}",
      "      media:",
      "        enabled: true",
      "        type: nfs",
      "        server: \"george.\\${INTERNAL_DOMAIN\\}\"",
      "        path: /tank/",
      "        mountPath: /media",
      "    resources:",
      "      requests:",
      "        cpu: 20m",
      "        memory: 100Mi",
      "      limits:",
      "        memory: 200Mi",
      ""
    ],
    "description": "kah-helmrelease"
  },
  "PersistentVolumeClaim": {
    "prefix": "",
    "body": [
      "---",
      "apiVersion: v1",
      "kind: PersistentVolumeClaim",
      "metadata:",
      "  name: ${1:pvc-name}",
      "  namespace: ${2:namespace}",
      "  labels:",
      "    app.kubernetes.io/name: &name ${3:app_name}",
      "    app.kubernetes.io/instance: *name",
      "    snapshot.home.arpa/enabled: \"true\"",
      "spec:",
      "  accessModes:",
      "    - ReadWriteOnce",
      "  resources:",
      "    requests:",
      "      storage: ${4:1Gi}",
      "  storageClassName: ceph-block",
      ""
    ],
    "description": ""
  },
  "kustomization": {
    "prefix": "kustomization",
    "body": [
      "---",
      "apiVersion: kustomize.config.k8s.io/v1beta1",
      "kind: Kustomization",
      "resources:",
      "  - config-pvc.yaml",
      "  - helm-release.yaml"
    ],
    "description": "kustomization"
  }
}
